# üîß –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ nix-darwin

–°–∏—Å—Ç–µ–º–∞ –±—ã–ª–∞ —Å–æ–±—Ä–∞–Ω–∞, –Ω–æ –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ sudo.

## –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
cd ~/.config/nix
sudo ./result/sw/bin/darwin-rebuild switch --flake .
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- `/run/current-system` —Å–∏–º–ª–∏–Ω–∫
- `darwin-rebuild` –≤ PATH
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `/etc/zshrc` —Å Nix –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
source /etc/zshrc

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
which darwin-rebuild
which home-manager

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
darwin-version
```

## –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

1. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª
2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ `darwin-rebuild switch --flake ~/.config/nix` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π  
3. ‚úÖ Homebrew –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. ‚úÖ Home-manager –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

## –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:

```bash
# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:
sudo darwin-rebuild rollback

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
tail -f /var/log/system.log
```